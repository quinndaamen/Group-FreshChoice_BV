@model IEnumerable<FreshChoice.Services.EmployeeManagement.Models.EmployeeModel>

<link rel="stylesheet" href="~/css/universal-forms.css" />
<link rel="stylesheet" href="~/css/employee-management.css" />

<body>
    <div class="container-page">
        <div class="header">
            <div class="text">
                <h2>Employee Management</h2>
                <p>Manage your team members and their information</p>
            </div>
            <div class="con-button">
                <a asp-action="Create" class="btn">
                    <i class="bi bi-plus-lg"></i> Add Employee
                </a>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-container">
            <div class="stat-card">
                <div class="label">Total Employees</div>
                <div class="value">@Model.Count()</div>
            </div>
            <div class="stat-card">
                <div class="label">With Shifts</div>
                <div class="value">@Model.Count(e => e.Shifts != null && e.Shifts.Any())</div>
            </div>
            <div class="stat-card">
                <div class="label">No Shifts</div>
                <div class="value">@Model.Count(e => e.Shifts == null || !e.Shifts.Any())</div>
            </div>
        </div>

        <!-- Search Filter -->
        <div class="filters-container" style="grid-template-columns: 1fr;">
            <input type="text" class="search-input" id="searchInput" placeholder="Search by name or email..." />
        </div>

        <!-- Employee Cards -->
        <div class="employees-container">
            @foreach (var employee in Model)
            {
                <div class="employee-card" 
                     data-search="@employee.FirstName @employee.LastName @employee.Email">
                    
                    <!-- Avatar -->
                    <div class="employee-avatar">
                        <i class="bi bi-person-fill"></i>
                    </div>

                    <!-- Employee Info -->
                    <div class="employee-info" style="grid-template-columns: 2fr 1fr;">
                        <!-- Name and Email -->
                        <div class="employee-name-section">
                            <div class="employee-name">
                                @employee.FirstName @employee.LastName
                            </div>
                            <div class="employee-contact">
                                <i class="bi bi-envelope"></i>
                                @(string.IsNullOrEmpty(employee.Email) ? "No email" : employee.Email)
                            </div>
                        </div>

                        <!-- Shifts Count -->
                        <div class="info-section">
                            <i class="bi bi-calendar-check"></i>
                            @if (employee.Shifts != null && employee.Shifts.Any())
                            {
                                <span>@employee.Shifts.Count shift(s)</span>
                            }
                            else
                            {
                                <span>No shifts</span>
                            }
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="employee-actions">
                        <a asp-action="Edit" asp-route-id="@employee.Id" class="action-btn edit" title="Edit">
                            <i class="bi bi-pencil"></i>
                        </a>
                        <form asp-action="Delete" asp-route-id="@employee.Id" method="post" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this employee?');">
                            <button type="submit" class="action-btn delete" title="Delete">
                                <i class="bi bi-trash"></i>
                            </button>
                        </form>
                    </div>
                </div>
            }
        </div>

        @if (!Model.Any())
        {
            <div class="alert alert-info" style="margin-top: 20px;">
                <i class="bi bi-info-circle"></i>
                No employees found. Click "Add Employee" to get started.
            </div>
        }
    </div>

    <script src="~/js/employee-management.js"></script>
</body>