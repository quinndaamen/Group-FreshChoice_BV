@model IEnumerable<FreshChoice.Services.EmployeeManagement.Models.EmployeeModel>

<link rel="stylesheet" href="~/css/employee-management.css" />
<link rel="stylesheet" href="~/css/custom-dropdown.css" />

<div class="container-page">
    <div class="header">
        <div class="text">
            <h2>Employee Management</h2>
            <p>Manage your team members and their information</p>
        </div>
        <div class="con-button">
            <a asp-action="Create" class="btn">
                <i class="bi bi-plus-lg"></i> Add Employee
            </a>
        </div>
    </div>

    <!-- Stats Cards -->
    <div class="stats-container">
        <div class="stat-card">
            <div class="label">Total Employees</div>
            <div class="value">@Model.Count()</div>
        </div>
        <div class="stat-card">
            <div class="label">Administrators</div>
            <div class="value">@Model.Count(e => e.Role == "Administrator")</div>
        </div>
        <div class="stat-card">
            <div class="label">Managers</div>
            <div class="value">@Model.Count(e => e.Role == "Manager")</div>
        </div>
        <div class="stat-card">
            <div class="label">Employees</div>
            <div class="value">@Model.Count(e => e.Role == "Employee")</div>
        </div>
    </div>

    <!-- Search and Filters -->
    <div class="filters-container">
        <input type="text" class="search-input" id="searchInput" placeholder="Search by name or email..." />
        <div class="custom-dropdown">
            <select class="filter-select" id="roleFilter">
                <option value="">All Roles</option>
                <option value="administrator">Administrator</option>
                <option value="manager">Manager</option>
                <option value="employee">Employee</option>
            </select>
        </div>
    </div>

    <!-- Employee Cards -->
    <div class="employees-container">
        @foreach (var employee in Model)
        {
            var roleClass = employee.Role == "Administrator" ? "role-manager" : 
                           employee.Role == "Manager" ? "role-supervisor" : 
                           "role-cashier";
            
            <div class="employee-card" 
                 data-search="@employee.FirstName @employee.LastName @employee.Email"
                 data-role="@employee.Role?.ToLower()"
                 data-status="active">
                
                <!-- Avatar -->
                <div class="employee-avatar">
                    <i class="bi bi-person-fill"></i>
                </div>

                <!-- Employee Info -->
                <div class="employee-info">
                    <!-- Name and Email -->
                    <div class="employee-name-section">
                        <div class="employee-name">
                            <span>@employee.FirstName @employee.LastName</span>
                            @if (!string.IsNullOrEmpty(employee.Role))
                            {
                                <span class="badge @roleClass">@employee.Role.ToLower()</span>
                            }
                        </div>
                        <div class="employee-contact">
                            <i class="bi bi-envelope"></i>
                            <span>@(string.IsNullOrEmpty(employee.Email) ? "No email" : employee.Email)</span>
                        </div>
                    </div>

                    <!-- Phone -->
                    <div class="info-section">
                        <i class="bi bi-telephone"></i>
                        <span>@(string.IsNullOrEmpty(employee.PhoneNumber) ? "No phone" : employee.PhoneNumber)</span>
                    </div>

                    <!-- Hired Date -->
                    <div class="info-section">
                        <i class="bi bi-calendar"></i>
                        <span>Hired: <span class="date-display" data-date="@(employee.HireDate.ToString("yyyy-MM-dd"))">@(employee.HireDate != null ? employee.HireDate.ToString("MMM dd, yyyy", System.Globalization.CultureInfo.InvariantCulture) : "N/A")</span></span>
                    </div>

                    <!-- Salary -->
                    <div class="info-section salary">
                        <i class="bi bi-currency-euro"></i>
                        <span>@(employee.WagePerHour != null ? $"{employee.WagePerHour:F2}/hr" : "N/A")</span>
                    </div>
                </div>

                <!-- Actions -->
                <div class="employee-actions">
                    <a asp-action="Edit" asp-route-id="@employee.Id" class="action-btn edit" title="Edit">
                        <i class="bi bi-pencil"></i>
                    </a>
                    <form asp-action="Delete" asp-route-id="@employee.Id" method="post" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this employee?');">
                        <button type="submit" class="action-btn delete" title="Delete">
                            <i class="bi bi-trash"></i>
                        </button>
                    </form>
                </div>
            </div>
        }
    </div>

    @if (!Model.Any())
    {
        <div class="alert">
            <i class="bi bi-info-circle"></i>
            <span>No employees found. Click "Add Employee" to get started.</span>
        </div>
    }
</div>

<script src="~/js/employee-management.js"></script>
<script src="~/js/custom-dropdown.js"></script>